// File: com/demo/game/controllers/SettingsController.java
package com.demo.game.controllers;

import com.almasb.fxgl.dsl.FXGL;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.control.Slider;
import java.io.IOException;

public class SettingsController {

    @FXML
    private Slider volumeSlider;
    @FXML
    private Slider sfxSlider;

    @FXML
    public void initialize() {
        // Load current settings
        // FXGL.getSettings() doesn't have simple getters for these,
        // you'd typically bind them. For simplicity, we set defaults.
        volumeSlider.setValue(FXGL.getSettings().getGlobalMusicVolume());
        sfxSlider.setValue(FXGL.getSettings().getGlobalSoundVolume());
    }

    @FXML
    private void handleSave() {
        // Save settings
        FXGL.getSettings().setGlobalMusicVolume(volumeSlider.getValue());
        FXGL.getSettings().setGlobalSoundVolume(sfxSlider.getValue());

        System.out.println("Settings Saved: Music=" + volumeSlider.getValue() + ", SFX=" + sfxSlider.getValue());

        handleBack(); // Go back after saving
    }

    @FXML
    private void handleBack() {
        switchToView("/com/demo/game/fxml/mainmenu.fxml");
    }

    private void switchToView(String fxmlFile) {
        try {
            Parent newRoot = FXMLLoader.load(getClass().getResource(fxmlFile));
            FXGL.getSceneService().getCurrentScene().getRoot().getChildren().setAll(newRoot);
        } catch (IOException e) {
            System.err.println("Failed to switch view: " + e.getMessage());
        }
    }
}